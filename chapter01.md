# let 변수, const 변수

- 자바스크립트 Deep Dive 15 장 추가

---

### 로컬, 전역 변수 구분 하는 이유

- 기능과 목적이 다르다
- 글로벌 변수
    - 다른 js 파일에서 변수 공유
    - 파일에서 공유 변수 개념으로 사용
    - 의도는 좋으나 처리 속도가 떨어짐

- 로컬 변수

    - 빠르게 식별자를 해결하기 위해 가까운 스코프의 변수를 사용하려는 것

### use strict 사용

- ES6+ 에서는 use strict 가 디폴트 환경이지만 전체는 아니다.

### 블록 스코프 유형

##### function 블록, try-catch 문 (try 블록 기준으로 catch는 해당하지 않는다), switch 문 (case 와 default 는 블록이 아님)

### let 변수

- 블록 스코프를 가진 변수
- 변수가 선언된 블록이 스코프

- 스코프 적용 기준
    - 블록{ }, 문, 표현식

- 블록 { } 안밖이 스코프가 다름
    - 변수 이름이 같아도 값이 대체되지 않는다

- 선언만 하면 초기값으로 undefined 가 할당된다

### 블록 스코프

- 중괄호 { }
- function
- if 조건문

- 블록 안과 밖이 스코프가 다르다
    - 변수 이름이 같아도 값이 대체되지 않는다

- 스코프에 같은 이름 사용이 불가하다

### let 과 this

- 글로벌 오브젝트에서 let 변수를 this 로 참조 불가

### js 파일 다수 사용

- 모든 js 파일에서 글로벌 오브젝트에 작성한 var 변수와 let 변수 공유
- 블록 안에 작성하면 공유하지 않는다

- 글로벌 오브젝트에 작성
    - var : window 에 설정 및 공유
    - let : Script 에 설정 및 공유
        - window.sports = { } 처럼 의도적으로 작성하지 않아도 된다

- { let 변수 } : Block 에 설정 , 공유하지 않음
    - 글로벌 오브젝트에서만 사용하는 로컬 변수로 사용한다

- 함수에 작성

  var 변수, let 변수 : Local

  { let 변수 } : Block

### 호이스팅

- ES5 실행 콘텍스트 처리 순서
    1. 함수 선언문 설정
    2. 변수 이름을 바인딩, 변수 값은 undefined
    3. 소스 코드 실행

- let 변수는 호이스팅되지 않음
    - let 변수 앞에서 변수 사용 불가

### const 변수

- 값을 바꾸지 않는 변수로 선언

- 선언문과 할당이 동시에 이루어져야 한다
- 상수는 대문자로 작성한다
- const 변수 사용시 타입이나 전체를 바꿀 수는 없지만 참조형인 Object 나 배열인 경우 프로퍼티나 엘리먼트 값을 바꿀수 있다

---

# 모던 자바스크립트 Deep Dive 15장

## let, const 키워드와 블록 레벨 스코프

### var 키워드로 선언한 변수의 문제점

#### 변수 중복 선언 허용

- var 키워드로 선언한 변수를 중벽 선언하면 초기화문 유무에 따라 다르게 동작한다
- 초기화 문이 있는 변수 선언문은 자바스크립트 엔진에 의해 var 키워드가 없는 것처럼 동작하고 초기화 문이 없는 변수 선언문은 무시된다

#### 함수 레벨 스코프

- var 키워드로 선언한 변수는 함수 블록만을 지역 스코프로 인식한다
- 함수 외부에서 var 키워드로 선언한 변수는 코드 블록 내에서 선언해도 모두 전역 변수가 된다

#### 변수 호이스팅

- 변수 선언문이 스코프의 선두로 끌어 올려진 것처럼 동작한다
- 변수 호이스팅에 의해 var 키워드로 선언한 변수는 변수 선언문 이전에 참조할 수 있다
- 참조한다면 undefined 가 반환된다

### let 키워드

#### 변수 중복 선언 금지

- 중복 선언시 문법 에러 발생

#### 블록 레벨 스코프

- if, for, while, try/catch 문을 지역 스코프로 인정하는 블록 레벨 스코프를 따른다

  #### 변수 호이스팅

- let 키워드로 선언한 변수는 선언과 초기화 단계가 분리되어 진행된다
- 초기화 단계가 실행되기 전에 변수에 접근하려고 하면 참조 에러가 발생한다
- **<u>스코프 시작 지점부터 초기화 시작 지점까지 변수를 참조할 수 없는 구간을 *일시적 사각지대*라고 부른다</u>**

- ES6 에서 let, const, var, function, function*, class 등을 호이스팅 한다.
- 하지만 let, const, class 를 사용한 선언문은 호이스팅을 하지 않는 것처럼 동작한다

#### 전역 객체와 let

- let 키워드로 선언한 전역 변수는 전역 객체의 프로퍼티가 아니다
- let 전역 변수는 보이지 않는 개념적인 블록 내에 존재한다

### const 키워드

#### 선언과 초기화

- **<u>const 키워드로 선언한 변수는 반드시 선언과 동시에 초기화해야 한다</u>**

#### 재할당 금지

#### 상수

- 재할당이 금지된 변수이다
- const 키워드로 선언된 변수에 원시 값을 할당한 경우 원시 값은 변경할 수 없는 값이고 재할당이 금지되어 있다

#### const 키워드와 객체

- 객체를 할당한 경우 값을 변경할 수 있다
- const 키워드는 재할당을 금지할 뿐 불변을 의미하지 않는다 
